Setup repo i Å›rodowisko

 UtwÃ³rz repozytorium Git (git init)

 StwÃ³rz wirtualne Å›rodowisko (conda/venv)

 UtwÃ³rz requirements.txt z podstawowymi pakietami:

torch, torchvision, mlflow, dvc[s3], prefect, fastapi, uvicorn, prometheus-client, pandas, numpy

 StwÃ³rz strukturÄ™ katalogÃ³w:

mlops-project/
â”œâ”€ data/
â”‚  â”œâ”€ raw/
â”‚  â””â”€ processed/
â”œâ”€ src/
â”‚  â”œâ”€ data/
â”‚  â”œâ”€ models/
â”‚  â”œâ”€ train.py
â”‚  â””â”€ predict.py
â”œâ”€ flows/
â”œâ”€ infra/
â”‚  â”œâ”€ docker/
â”‚  â””â”€ k8s/
â”œâ”€ dvc.yaml
â”œâ”€ Dockerfile
â”œâ”€ README.md
â””â”€ .github/workflows/

2ï¸âƒ£ Dane i DVC

 Zainstaluj DVC: pip install dvc[s3]

 Pobierz CIFAR-10 i dodaj do data/raw/

 Zainicjuj DVC: dvc init

 Dodaj dane do DVC: dvc add data/raw/cifar10

 Skonfiguruj remote storage (S3 / MinIO) do przechowywania danych:

dvc remote add -d myremote s3://mlops-remote
dvc push


 SprawdÅº, Å¼e dane moÅ¼na pobraÄ‡: dvc pull

3ï¸âƒ£ Preprocessing danych

 StwÃ³rz src/data/preprocess.py

Normalizacja obrazÃ³w

PodziaÅ‚ na train/test/val

Zapis do data/processed/

 Dodaj etap w dvc.yaml dla preprocessu:

stages:
  preprocess:
    cmd: python src/data/preprocess.py
    deps:
      - data/raw/cifar10
      - src/data/preprocess.py
    outs:
      - data/processed


 Przetestuj lokalnie: dvc repro

4ï¸âƒ£ Model i trening

 StwÃ³rz src/models/model.py â€” prosty CNN

 src/train.py:

Wczytuje dane z data/processed/

Trenuje model w PyTorch

Loguje loss i accuracy do MLflow

Zapisuje model: torch.save(model.state_dict(), "model.pt")

 Test lokalny: python src/train.py

5ï¸âƒ£ MLflow eksperymenty

 Uruchom lokalny MLflow server: mlflow ui

 W train.py dodaj logowanie eksperymentÃ³w i parametrÃ³w:

mlflow.set_tracking_uri("http://localhost:5000")
mlflow.set_experiment("cifar10_experiment")
mlflow.log_params({...})
mlflow.log_metrics({...})
mlflow.log_artifact("model.pt")


 SprawdÅº UI MLflow, czy eksperymenty zapisujÄ… siÄ™ poprawnie

6ï¸âƒ£ Automatyzacja pipelineâ€™u z Prefect

 StwÃ³rz flows/prefect_flow.py:

from prefect import flow, task
import subprocess

@task
def dvc_pull():
    subprocess.run(["dvc", "pull"], check=True)

@task
def train():
    subprocess.run(["python", "src/train.py"], check=True)

@flow
def train_flow():
    dvc_pull()
    train()

if __name__ == "__main__":
    train_flow()


 Test lokalny: python flows/prefect_flow.py

7ï¸âƒ£ FastAPI serwis

 StwÃ³rz src/predict.py:

Wczytuje wytrenowany model

REST API /predict przyjmujÄ…ce obraz

Zwraca klasÄ™

 Test lokalny: uvicorn src.predict:app --reload

8ï¸âƒ£ Docker + test lokalny

 Dockerfile (multi-stage):

Instalacja dependencies

Kopiowanie kodu

CMD uruchamiajÄ…cy FastAPI lub trening

 Budowa obrazu: docker build -t cifar10-service .

 Test lokalny kontenera: docker run -p 8000:8000 cifar10-service

9ï¸âƒ£ Kubernetes

 StwÃ³rz manifests K8s: Deployment + Service

 Deployment na lokalnym K8s (minikube lub kind)

 Sprawdzenie, czy API dziaÅ‚a w klastrze

ğŸ”Ÿ Monitoring

 W train.py i predict.py dodaj Prometheus metrics (loss, accuracy, latency)

 Skonfiguruj Prometheus scrape

 StwÃ³rz Grafana dashboard

1ï¸âƒ£1ï¸âƒ£ CI/CD

 GitHub Actions:

Uruchamianie testÃ³w

Budowa i push obrazu Docker

Opcjonalny deploy do K8s

âœ… Opcjonalne rozszerzenia

Drift detection (Evidently / WhyLogs)

Model registry i rollback w MLflow

Automatyczne wersjonowanie danych i modelu przy zmianach